import { MigrationInterface, QueryRunner } from "typeorm";

export class InitialMigration1765860943517 implements MigrationInterface {
    name = 'InitialMigration1765860943517'

    public async up(queryRunner: QueryRunner): Promise<void> {
        await queryRunner.query(`CREATE TABLE "email_log" ("id" uniqueidentifier NOT NULL CONSTRAINT "DF_edfd3f7225051fc07bdd63a22dc" DEFAULT NEWSEQUENTIALID(), "recipient_email" varchar(100) NOT NULL, "recipient_name" varchar(100), "subject" varchar(200) NOT NULL, "body" text NOT NULL, "template" varchar(50) NOT NULL, "status" varchar(50) NOT NULL, "error_message" text, "metadata" ntext, "sent_at" datetime, "created_at" datetime2 NOT NULL CONSTRAINT "DF_165d4d4bf970ba4e813dc6266c9" DEFAULT getdate(), CONSTRAINT "PK_edfd3f7225051fc07bdd63a22dc" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_ecbffcd25b85459ccf5e753e01" ON "email_log" ("recipient_email", "created_at") `);
        await queryRunner.query(`CREATE TABLE "country" ("id" int NOT NULL IDENTITY(1,1), "name" varchar(100) NOT NULL, "iso3" varchar(3) NOT NULL, "iso2" varchar(2) NOT NULL, "phone_code" varchar(10), "currency" varchar(10), "created_at" datetime2 NOT NULL CONSTRAINT "DF_750c3d29ca1322c5d4c94ba1638" DEFAULT getdate(), CONSTRAINT "UQ_8df5b1a0131e8e155381547aa5b" UNIQUE ("iso3"), CONSTRAINT "UQ_b49a3cfa4a8ab50b388f893cd4c" UNIQUE ("iso2"), CONSTRAINT "PK_bf6e37c231c4f4ea56dcd887269" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "user_roles" ("id" int NOT NULL IDENTITY(1,1), "name" varchar(50) NOT NULL, "description" varchar(255), "permissions" nvarchar(255), "created_at" datetime2 NOT NULL CONSTRAINT "DF_57c0e3aef56ade8d2465c237d89" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_01c42a37022e86654d1e04fdf7a" DEFAULT getdate(), CONSTRAINT "UQ_4a77d431a6b2ac981c342b13c94" UNIQUE ("name"), CONSTRAINT "PK_8acd5cf26ebd158416f477de799" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_4a77d431a6b2ac981c342b13c9" ON "user_roles" ("name") `);
        await queryRunner.query(`CREATE TABLE "room" ("id" int NOT NULL IDENTITY(1,1), "restaurant_id" int NOT NULL, "name" varchar(100) NOT NULL, "description" text, "capacity" int NOT NULL, "price_per_night" decimal(10,2) NOT NULL, "original_price" decimal(10,2), "size" varchar(50), "bed_type" varchar(50), "category" varchar(50), "amenities" nvarchar(255), "features" nvarchar(255), "discount" varchar(50), "image_url" varchar(255), "image_gallery" nvarchar(255), "available" bit NOT NULL CONSTRAINT "DF_3c846c21ed6f916c293f11bb113" DEFAULT 1, "featured" bit NOT NULL CONSTRAINT "DF_67b2fe980d3ff34f90706f0869e" DEFAULT 0, "popular" bit NOT NULL CONSTRAINT "DF_59a00c73ca19f3ba6c6276e647c" DEFAULT 0, "family" bit NOT NULL CONSTRAINT "DF_584e065818a4bed51959cf216b4" DEFAULT 0, "luxury" bit NOT NULL CONSTRAINT "DF_1253bd85a67aaaa1b61311ef691" DEFAULT 0, "romantic" bit NOT NULL CONSTRAINT "DF_7081b9f737a55fa3816ab2842f9" DEFAULT 0, "accessible" bit NOT NULL CONSTRAINT "DF_ebb5d850011f2e21ebb44c37f13" DEFAULT 0, "pet_friendly" bit NOT NULL CONSTRAINT "DF_d75bfe535a875940814e287acd7" DEFAULT 0, "created_at" datetime2 NOT NULL CONSTRAINT "DF_3022704495d9d0e94ee8f7295fc" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_11b8cec575ebebd933c178e0e19" DEFAULT getdate(), "deleted_at" datetime2, CONSTRAINT "PK_c6d46db005d623e691b2fbcba23" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "room_booking" ("id" int NOT NULL IDENTITY(1,1), "booking_number" varchar(20) NOT NULL, "room_id" int NOT NULL, "user_id" int NOT NULL, "check_in_date" date NOT NULL, "check_out_date" date NOT NULL, "number_of_guests" int NOT NULL, "total_price" decimal(10,2) NOT NULL, "status" varchar(20) NOT NULL CONSTRAINT "DF_976ab151604437934bf400d8b70" DEFAULT 'Pending', "payment_id" int, "special_requests" text, "created_at" datetime2 NOT NULL CONSTRAINT "DF_1e17e4d39102ac2b327336b0fef" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_fbca9624839cf55eacc0becaf9e" DEFAULT getdate(), "deleted_at" datetime2, CONSTRAINT "UQ_d0427afc424572db29225055281" UNIQUE ("booking_number"), CONSTRAINT "PK_37af696e6aeb3fcb059778a96ff" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_a0636ea72b90d6196820447479" ON "room_booking" ("room_id", "check_in_date") `);
        await queryRunner.query(`CREATE TABLE "invoice" ("id" int NOT NULL IDENTITY(1,1), "payment_id" int NOT NULL, "invoice_number" varchar(50) NOT NULL, "pdf_url" varchar(255), "issued_at" datetime NOT NULL, "sent_at" datetime, "created_at" datetime2 NOT NULL CONSTRAINT "DF_e7d54e7a976b8088cc8e6a91098" DEFAULT getdate(), CONSTRAINT "UQ_c7ec75a1a4068196ea74b920df9" UNIQUE ("invoice_number"), CONSTRAINT "PK_15d25c200d9bcd8a33f698daf18" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "payment" ("id" int NOT NULL IDENTITY(1,1), "payment_number" varchar(50) NOT NULL, "email" varchar(255) NOT NULL, "authorization_url" varchar(255), "user_id" int NOT NULL, "amount" decimal(10,2) NOT NULL, "currency" varchar(3) NOT NULL CONSTRAINT "DF_41f2c5480b079efda823e4794ea" DEFAULT 'KES', "payment_method" varchar(50) NOT NULL, "gateway" varchar(50) NOT NULL, "payment_reference" varchar(100) NOT NULL, "status" varchar(50) NOT NULL CONSTRAINT "DF_3af0086da18f32ac05a52e56390" DEFAULT 'pending', "transaction_id" varchar(255), "gateway_reference" varchar(255), "gateway_response" varchar(4000), "failure_reason" varchar(255), "refunded_amount" decimal(10,2) NOT NULL CONSTRAINT "DF_f177fe7e03e05c86d16a13a9b58" DEFAULT 0, "processed_at" datetime2 CONSTRAINT "DF_6aed5ca7585138bdcf002bfaf13" DEFAULT getdate(), "failed_at" datetime2, "paid_at" datetime2, "channel" varchar(255), "metadata" varchar(2000), "delivery_initiated" bit NOT NULL CONSTRAINT "DF_8aab03ccd0f3682582fd995cc2f" DEFAULT 0, "delivery_reference" int, "delivery_error" varchar(2000), "callback_url" varchar(1000), "created_at" datetime2 NOT NULL CONSTRAINT "DF_2216ad74f64b73c04d5fb3c3610" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_6765c894a5ccf625b7b0a4ac9e3" DEFAULT getdate(), "order_id" int, "reservation_id" int, "room_booking_id" int, CONSTRAINT "UQ_28f823091ff91a736d72a206e07" UNIQUE ("payment_number"), CONSTRAINT "UQ_54fc428ca06ce52fd478d8706d8" UNIQUE ("payment_reference"), CONSTRAINT "PK_fcaec7df5adf9cac408c686b2ab" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE UNIQUE INDEX "REL_fc0069dbffe962f7b1604c1410" ON "payment" ("reservation_id") WHERE "reservation_id" IS NOT NULL`);
        await queryRunner.query(`CREATE UNIQUE INDEX "REL_68cdd285bf17d1527f6a213c39" ON "payment" ("room_booking_id") WHERE "room_booking_id" IS NOT NULL`);
        await queryRunner.query(`CREATE TABLE "reservation" ("id" int NOT NULL IDENTITY(1,1), "reservation_number" varchar(20) NOT NULL, "user_id" int NOT NULL, "restaurant_id" int NOT NULL, "table_id" int, "reservation_type" varchar(20) NOT NULL, "reservation_date" date NOT NULL, "reservation_time" time NOT NULL, "guest_count" int NOT NULL, "special_request" text, "status" varchar(20) NOT NULL CONSTRAINT "DF_29be1e5ad1e641d6966b30aa9b9" DEFAULT 'Pending', "payment_id" int, "deposit_amount" decimal(10,2), "created_at" datetime2 NOT NULL CONSTRAINT "DF_3feaefd7a55e1d5b2052bc3866a" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_e3b6d01292e06eafb76b489900a" DEFAULT getdate(), "deleted_at" datetime2, CONSTRAINT "UQ_d1e817e306498b6515b78ab2bcc" UNIQUE ("reservation_number"), CONSTRAINT "PK_48b1f9922368359ab88e8bfa525" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_84a0268487fde50cc3a50f3e8a" ON "reservation" ("restaurant_id", "reservation_date") `);
        await queryRunner.query(`CREATE TABLE "table" ("id" int NOT NULL IDENTITY(1,1), "restaurant_id" int NOT NULL, "table_number" varchar(20) NOT NULL, "capacity" int NOT NULL, "location" varchar(100), "status" varchar(20) NOT NULL CONSTRAINT "DF_3f333f8bddf72189f338956a26e" DEFAULT 'Available', "minimum_charge" decimal(10,2), "created_at" datetime2 NOT NULL CONSTRAINT "DF_7802154761515f2451ea1e3d15c" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_1878b093ed6bc4659f61a432d69" DEFAULT getdate(), CONSTRAINT "PK_28914b55c485fc2d7a101b1b2a4" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "address" ("id" int NOT NULL IDENTITY(1,1), "user_id" int NOT NULL, "street_address_1" varchar(255) NOT NULL, "street_address_2" varchar(255), "zip_code" varchar(20) NOT NULL, "latitude" decimal(10,7), "longitude" decimal(10,7), "label" varchar(100), "is_default" bit NOT NULL CONSTRAINT "DF_84f931e0dde2d3242d3fc0cd8ad" DEFAULT 0, "city_id" int NOT NULL, "delivery_instructions" text, "created_at" datetime2 NOT NULL CONSTRAINT "DF_84d0766a999bea5caff89e22078" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_27c9d6de6ba907f6e355ea7053e" DEFAULT getdate(), "deleted_at" datetime2, CONSTRAINT "PK_d92de1f82754668b5f5f5dd4fd5" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "order_status" ("id" int NOT NULL IDENTITY(1,1), "order_id" int NOT NULL, "status_catalog_id" int NOT NULL, "notes" text, "updated_by" int, "created_at" datetime2 NOT NULL CONSTRAINT "DF_d80da2344a6cd7fea53ae888b4f" DEFAULT getdate(), CONSTRAINT "PK_8ea75b2a26f83f3bc98b9c6aaf6" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "status_catalog" ("id" int NOT NULL IDENTITY(1,1), "name" varchar(50) NOT NULL, "description" varchar(255), "color" varchar(20), "created_at" datetime2 NOT NULL CONSTRAINT "DF_7f7b78b732d7b0281b5fed78c52" DEFAULT getdate(), CONSTRAINT "UQ_e629db30e446da6cf12d443fc10" UNIQUE ("name"), CONSTRAINT "PK_3cd164e4ea4b993994152208a52" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "category" ("id" int NOT NULL IDENTITY(1,1), "name" varchar(100) NOT NULL, "description" varchar(255), "image_url" varchar(255), "sort_order" int NOT NULL CONSTRAINT "DF_ba59c1d22e5260f4a0a40711921" DEFAULT 0, "active" bit NOT NULL CONSTRAINT "DF_c68e916634e9939cf0321c9aaad" DEFAULT 1, "created_at" datetime2 NOT NULL CONSTRAINT "DF_dff2bd18e8bb11a0300d4a624c9" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_e302377d50550b1b13853825736" DEFAULT getdate(), "restaurant_id" int, CONSTRAINT "PK_9c4e4a89e3674fc9f382d733f03" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "review" ("id" int NOT NULL IDENTITY(1,1), "user_id" int NOT NULL, "restaurant_id" int, "menu_item_id" int, "order_id" int, "rating" int NOT NULL, "comment" text, "images" nvarchar(255), "verified" bit NOT NULL CONSTRAINT "DF_f22241687d944250228e5be99d6" DEFAULT 1, "admin_response" text, "response_date" datetime, "created_at" datetime2 NOT NULL CONSTRAINT "DF_004547e1fee5af6fc9fd3de0956" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_e045ebbb33ef7af0d13176f55b5" DEFAULT getdate(), "deleted_at" datetime2, CONSTRAINT "PK_2e4299a343a81574217255c00ca" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_6781107b20e9aed484c340e908" ON "review" ("menu_item_id", "created_at") `);
        await queryRunner.query(`CREATE INDEX "IDX_7258583122a81366d02d06f7af" ON "review" ("restaurant_id", "created_at") `);
        await queryRunner.query(`CREATE TABLE "menu_item" ("id" int NOT NULL IDENTITY(1,1), "restaurant_id" int NOT NULL, "category_id" int NOT NULL, "name" varchar(200) NOT NULL, "description" text, "price" decimal(10,2) NOT NULL, "ingredients" text, "image_url" varchar(255), "available" bit NOT NULL CONSTRAINT "DF_5b2a9c926c0ed3ecdd0119b28d3" DEFAULT 1, "is_featured" bit NOT NULL CONSTRAINT "DF_0df405d2bf529ef7e313cf48517" DEFAULT 0, "preparation_time" int NOT NULL CONSTRAINT "DF_b778fac1b4fc946d377d27d4416" DEFAULT 0, "average_rating" decimal(3,2) NOT NULL CONSTRAINT "DF_1987189a4fd293beb5c22888ac2" DEFAULT 0, "total_reviews" int NOT NULL CONSTRAINT "DF_074616e9006997531e45b6d21eb" DEFAULT 0, "calories" int NOT NULL CONSTRAINT "DF_eccdaa3547625209f73c1976ad4" DEFAULT 0, "allergens" nvarchar(255), "created_at" datetime2 NOT NULL CONSTRAINT "DF_a24bfc84bd4665be608d6b9e62b" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_336fb0dbb90002455d8191aa308" DEFAULT getdate(), "deleted_at" datetime2, CONSTRAINT "PK_722c4de0accbbfafc77947a8556" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_c92955bfc77b52366c99bd065b" ON "menu_item" ("restaurant_id", "category_id") `);
        await queryRunner.query(`CREATE TABLE "order_item" ("id" int NOT NULL IDENTITY(1,1), "order_id" int NOT NULL, "menu_item_id" int NOT NULL, "quantity" int NOT NULL, "unit_price" decimal(10,2) NOT NULL, "total_price" decimal(10,2) NOT NULL, "comment" text, "created_at" datetime2 NOT NULL CONSTRAINT "DF_66561ef057388238c0522e66834" DEFAULT getdate(), CONSTRAINT "PK_d01158fe15b1ead5c26fd7f4e90" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "delivery_tracking" ("id" int NOT NULL IDENTITY(1,1), "order_id" int NOT NULL, "driver_id" int NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "speed" decimal(5,2), "heading" decimal(5,2), "distance_to_destination" decimal(10,2), "eta_minutes" int, "status" varchar(50), "created_at" datetime2 NOT NULL CONSTRAINT "DF_c74d26cceebc66cfc5d095a5ec4" DEFAULT getdate(), CONSTRAINT "PK_165d1402d6af7bb3aa56eecd0f0" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_7f701a8fb1c77001a8c9c9ac3c" ON "delivery_tracking" ("order_id", "created_at") `);
        await queryRunner.query(`CREATE TABLE "orders" ("id" int NOT NULL IDENTITY(1,1), "order_number" varchar(20) NOT NULL, "restaurant_id" int NOT NULL, "user_id" int NOT NULL, "driver_id" int, "table_id" int, "delivery_address_id" int, "order_type" varchar(20) NOT NULL, "payment_id" int, "status_id" int NOT NULL, "total_price" decimal(10,2) NOT NULL, "discount" decimal(10,2) NOT NULL CONSTRAINT "DF_ad623493cc52936e7c4acc9fd82" DEFAULT 0, "delivery_fee" decimal(10,2) NOT NULL CONSTRAINT "DF_a52aee16e03e2334ff8bb3e6649" DEFAULT 0, "tax_amount" decimal(10,2) NOT NULL CONSTRAINT "DF_53189bae4bb0e8e22d83263dc74" DEFAULT 0, "final_price" decimal(10,2) NOT NULL, "comment" text, "estimated_delivery_time" datetime, "actual_delivery_time" datetime, "scheduled_time" datetime, "created_at" datetime2 NOT NULL CONSTRAINT "DF_c884e321f927d5b86aac7c8f9ef" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_44eaa1eacc7a091d5d3e2a6c828" DEFAULT getdate(), "deleted_at" datetime2, CONSTRAINT "UQ_75eba1c6b1a66b09f2a97e6927b" UNIQUE ("order_number"), CONSTRAINT "PK_710e2d4957aa5878dfe94e4ac2f" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_222cd7bf166a2d7a6aad9cdebe" ON "orders" ("driver_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_c884e321f927d5b86aac7c8f9e" ON "orders" ("created_at") `);
        await queryRunner.query(`CREATE INDEX "IDX_0379c1cb8cd158363b657fd849" ON "orders" ("restaurant_id", "user_id") `);
        await queryRunner.query(`CREATE TABLE "vehicle_info" ("id" int NOT NULL IDENTITY(1,1), "user_id" int NOT NULL, "vehicle_make" varchar(50) NOT NULL, "vehicle_model" varchar(50) NOT NULL, "vehicle_year" varchar(4) NOT NULL, "license_plate" varchar(20) NOT NULL, "license_number" varchar(50), "color" varchar(50), "vehicle_type" varchar(50), "created_at" datetime2 NOT NULL CONSTRAINT "DF_5efa7a36e9cb2ad4e086a007c61" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_846b7d5510b6d97cd334422df08" DEFAULT getdate(), CONSTRAINT "UQ_f67df89a1a40c7d272f32a7bb0b" UNIQUE ("user_id"), CONSTRAINT "UQ_ef6652f2af642a4731dc58937c6" UNIQUE ("license_plate"), CONSTRAINT "PK_098f6cf94c6ab295745f1d73ff2" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE UNIQUE INDEX "REL_f67df89a1a40c7d272f32a7bb0" ON "vehicle_info" ("user_id") WHERE "user_id" IS NOT NULL`);
        await queryRunner.query(`CREATE TABLE "shift" ("id" int NOT NULL IDENTITY(1,1), "staff_id" int NOT NULL, "start_time" datetime NOT NULL, "end_time" datetime NOT NULL, "shift_date" date NOT NULL, "status" varchar(50), "notes" text, "created_at" datetime2 NOT NULL CONSTRAINT "DF_20e5a7f9895cbcbad9ee8ce0043" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_b0d122f6c6cba5d43898443bb3e" DEFAULT getdate(), CONSTRAINT "PK_53071a6485a1e9dc75ec3db54b9" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_b41697313e0aad1c91fa14a9b9" ON "shift" ("staff_id", "shift_date") `);
        await queryRunner.query(`CREATE TABLE "restaurant_staff" ("id" int NOT NULL IDENTITY(1,1), "user_id" int NOT NULL, "restaurant_id" int NOT NULL, "position" varchar(100) NOT NULL, "salary" decimal(10,2), "hire_date" date NOT NULL, "active" bit NOT NULL CONSTRAINT "DF_92a9f3d90b1e2dc666756ace951" DEFAULT 1, "emergency_contact" varchar(100), "emergency_phone" varchar(20), "created_at" datetime2 NOT NULL CONSTRAINT "DF_8d4e8fdccc42919b5138d47d398" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_52534bffe7f48f74c13ba7414c7" DEFAULT getdate(), CONSTRAINT "UQ_973c53bdc06495c9daf779e23f3" UNIQUE ("user_id"), CONSTRAINT "PK_6b47b2ff71d81e5d3c18117b228" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE UNIQUE INDEX "REL_973c53bdc06495c9daf779e23f" ON "restaurant_staff" ("user_id") WHERE "user_id" IS NOT NULL`);
        await queryRunner.query(`CREATE TABLE "staff_assignments" ("id" int NOT NULL IDENTITY(1,1), "restaurant_id" int NOT NULL, "staff_id" int NOT NULL, "role" nvarchar(255) NOT NULL, "status" nvarchar(255) NOT NULL CONSTRAINT "DF_0d762d24cb49941324973e92e28" DEFAULT 'active', "assignedAt" datetime2 NOT NULL CONSTRAINT "DF_41df2a443bc7ae048a9435ac60a" DEFAULT getdate(), CONSTRAINT "PK_ab013446523a48ceb9b14144530" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "driver_assignments" ("id" int NOT NULL IDENTITY(1,1), "restaurant_id" int NOT NULL, "driver_id" int NOT NULL, "vehicleType" nvarchar(255), "licensePlate" nvarchar(255), "status" nvarchar(255) NOT NULL CONSTRAINT "DF_47028f395a590c840485deda212" DEFAULT 'active', "workingHours" ntext, "assignedAt" datetime2 NOT NULL CONSTRAINT "DF_bcebf6c06f27aada09c90379352" DEFAULT getdate(), CONSTRAINT "PK_b72677caff7b7e9acad3d55b3ec" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "users" ("id" int NOT NULL IDENTITY(1,1), "name" varchar(100) NOT NULL, "email" varchar(100) NOT NULL, "phone" varchar(20) NOT NULL, "password" varchar(255) NOT NULL, "email_verified" bit NOT NULL CONSTRAINT "DF_cf96ca0dc9c97fdc2ae06831d87" DEFAULT 0, "profile_image" varchar(255), "active" bit NOT NULL CONSTRAINT "DF_0890d8ebe90990c78fe4804231b" DEFAULT 1, "status" varchar(30) NOT NULL CONSTRAINT "DF_3676155292d72c67cd4e090514f" DEFAULT 'pending_verification', "reset_token" varchar(100), "verification_token" varchar(100), "reset_token_expiry" datetime, "role_id" int NOT NULL, "is_online" bit NOT NULL CONSTRAINT "DF_f04cb5149b3f89dab517cdcd759" DEFAULT 0, "is_available" bit NOT NULL CONSTRAINT "DF_41e24718b3c2ea982341314c329" DEFAULT 0, "current_latitude" decimal(10,7), "current_longitude" decimal(10,7), "average_rating" decimal(3,2) NOT NULL CONSTRAINT "DF_97b88a24c41eb6f0c6f52200739" DEFAULT 0, "total_deliveries" int NOT NULL CONSTRAINT "DF_1234ef86c586130205a168017a4" DEFAULT 0, "created_at" datetime2 NOT NULL CONSTRAINT "DF_c9b5b525a96ddc2c5647d7f7fa5" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_6d596d799f9cb9dac6f7bf7c23c" DEFAULT getdate(), "deleted_at" datetime2, CONSTRAINT "UQ_97672ac88f789774dd47f7c8be3" UNIQUE ("email"), CONSTRAINT "UQ_a000cca60bcf04454e727699490" UNIQUE ("phone"), CONSTRAINT "PK_a3ffb1c0c8416b9fc6f907b7433" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_a2cecd1a3531c0b041e29ba46e" ON "users" ("role_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_a000cca60bcf04454e72769949" ON "users" ("phone") `);
        await queryRunner.query(`CREATE INDEX "IDX_97672ac88f789774dd47f7c8be" ON "users" ("email") `);
        await queryRunner.query(`CREATE TABLE "restaurant" ("id" int NOT NULL IDENTITY(1,1), "name" varchar(200) NOT NULL, "description" text, "email" varchar(100) NOT NULL, "phone" varchar(20) NOT NULL, "street_address" varchar(255) NOT NULL, "zip_code" varchar(20) NOT NULL, "latitude" decimal(10,7), "longitude" decimal(10,7), "logo_url" varchar(255), "cover_image_url" varchar(255), "opening_time" time, "closing_time" time, "active" bit NOT NULL CONSTRAINT "DF_b2f8b70a5283e6db6f5c9797a4f" DEFAULT 1, "average_rating" decimal(3,2) NOT NULL CONSTRAINT "DF_2dc310dfa45a44e2c46536c9e6e" DEFAULT 0, "owner_id" int NOT NULL, "city_id" int NOT NULL, "created_at" datetime2 NOT NULL CONSTRAINT "DF_bec6b630b0994e8a732afc33f61" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_e54286d85c074ba95d65ee6d17b" DEFAULT getdate(), "deleted_at" datetime2, CONSTRAINT "UQ_d055cac5f0f06d57b0a3b1fe574" UNIQUE ("email"), CONSTRAINT "PK_649e250d8b8165cb406d99aa30f" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE UNIQUE INDEX "REL_fe7a22ecf454b7168b5a37fbdc" ON "restaurant" ("owner_id") WHERE "owner_id" IS NOT NULL`);
        await queryRunner.query(`CREATE TABLE "city" ("id" int NOT NULL IDENTITY(1,1), "name" varchar(100) NOT NULL, "state_id" int NOT NULL, "created_at" datetime2 NOT NULL CONSTRAINT "DF_60ff27bbe4002d0da0da7801087" DEFAULT getdate(), CONSTRAINT "PK_b222f51ce26f7e5ca86944a6739" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "state" ("id" int NOT NULL IDENTITY(1,1), "name" varchar(100) NOT NULL, "code" varchar(10) NOT NULL, "country_id" int NOT NULL, "created_at" datetime2 NOT NULL CONSTRAINT "DF_08e95aa8f7270203931afa36e8f" DEFAULT getdate(), CONSTRAINT "PK_549ffd046ebab1336c3a8030a12" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "stock_transaction" ("id" int NOT NULL IDENTITY(1,1), "inventory_item_id" int NOT NULL, "quantity_change" int NOT NULL, "transaction_type" varchar(20) NOT NULL, "reference_id" varchar(100), "reason" varchar(255), "performed_by" int, "created_at" datetime2 NOT NULL CONSTRAINT "DF_13cd3842675392f6a82a3dff577" DEFAULT getdate(), CONSTRAINT "PK_8a81a89b9130bda3a5277cce53a" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_0eac8d9bcb0be44d349b122979" ON "stock_transaction" ("inventory_item_id", "created_at") `);
        await queryRunner.query(`CREATE TABLE "inventory_item" ("id" int NOT NULL IDENTITY(1,1), "restaurant_id" int NOT NULL, "supplier_id" int NOT NULL, "name" varchar(200) NOT NULL, "category" varchar(100) NOT NULL, "quantity" int NOT NULL, "unit" varchar(50) NOT NULL, "unit_price" decimal(10,2) NOT NULL, "threshold" int NOT NULL, "sku" varchar(50), "expiry_date" date, "created_at" datetime2 NOT NULL CONSTRAINT "DF_1ce2b3aabdfa4fafd2908cb22ae" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_1e0603c73d58002cf5b33666cd0" DEFAULT getdate(), CONSTRAINT "PK_94f5cbcb5f280f2f30bd4a9fd90" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_32c5687918533fbb6f0c12db6a" ON "inventory_item" ("restaurant_id", "category") `);
        await queryRunner.query(`CREATE TABLE "supplier" ("id" int NOT NULL IDENTITY(1,1), "name" varchar(200) NOT NULL, "contact_name" varchar(100) NOT NULL, "phone" varchar(20) NOT NULL, "email" varchar(100) NOT NULL, "address" varchar(255) NOT NULL, "active" bit NOT NULL CONSTRAINT "DF_4dcc750e756ea4cf3981b0f970a" DEFAULT 1, "created_at" datetime2 NOT NULL CONSTRAINT "DF_d3be59f060dcff11bca5c4af9c6" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_3ac2bb3497029a0e89949cb3f6b" DEFAULT getdate(), CONSTRAINT "PK_2bc0d2cab6276144d2ff98a2828" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "refresh_tokens" ("id" int NOT NULL IDENTITY(1,1), "user_id" int NOT NULL, "token" varchar(500) NOT NULL, "expires_at" datetime NOT NULL, "revoked" bit NOT NULL CONSTRAINT "DF_36c7f5a6a8d1c7c23470457dc3b" DEFAULT 0, "ip_address" varchar(50), "user_agent" varchar(255), "created_at" datetime2 NOT NULL CONSTRAINT "DF_c99b2ad787be686915517fb8bc4" DEFAULT getdate(), CONSTRAINT "UQ_4542dd2f38a61354a040ba9fd57" UNIQUE ("token"), CONSTRAINT "PK_7d8bee0204106019488c4c50ffa" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_4542dd2f38a61354a040ba9fd5" ON "refresh_tokens" ("token") `);
        await queryRunner.query(`CREATE INDEX "IDX_3ddc983c5f7bcf132fd8732c3f" ON "refresh_tokens" ("user_id") `);
        await queryRunner.query(`CREATE TABLE "user_behavior" ("id" int NOT NULL IDENTITY(1,1), "user_id" int NOT NULL, "session_date" date NOT NULL, "session_id" varchar(50) NOT NULL, "page_views" int NOT NULL, "menu_views" int NOT NULL, "restaurant_views" int NOT NULL, "items_added_to_cart" int NOT NULL, "checkout_attempts" int NOT NULL, "completed_orders" int NOT NULL, "reservation_attempts" int NOT NULL, "completed_reservations" int NOT NULL, "room_booking_attempts" int NOT NULL, "completed_room_bookings" int NOT NULL, "session_duration_seconds" int NOT NULL, "device_type" varchar(50), "browser" varchar(50), "platform" varchar(50), "created_at" datetime2 NOT NULL CONSTRAINT "DF_a2aed8b915d2c3ddf6acd933f9c" DEFAULT getdate(), CONSTRAINT "PK_5a7cd6d00de0e036b185f6a23eb" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_dc5c5ce5901245af0baff0d20b" ON "user_behavior" ("session_date") `);
        await queryRunner.query(`CREATE INDEX "IDX_e6ffc42dd1f62d01a1bf609627" ON "user_behavior" ("user_id", "session_date") `);
        await queryRunner.query(`CREATE TABLE "business_metrics" ("id" int NOT NULL IDENTITY(1,1), "restaurant_id" int, "date" date NOT NULL, "total_revenue" decimal(12,2) NOT NULL, "online_revenue" decimal(12,2) NOT NULL, "dine_in_revenue" decimal(12,2) NOT NULL, "delivery_revenue" decimal(12,2) NOT NULL, "total_orders" int NOT NULL, "online_orders" int NOT NULL, "dine_in_orders" int NOT NULL, "delivery_orders" int NOT NULL, "average_order_value" decimal(8,2) NOT NULL, "new_customers" int NOT NULL, "returning_customers" int NOT NULL, "customer_satisfaction_score" decimal(5,2) NOT NULL, "total_reservations" int NOT NULL, "confirmed_reservations" int NOT NULL, "cancelled_reservations" int NOT NULL, "reservation_utilization_rate" decimal(5,2) NOT NULL, "total_room_bookings" int NOT NULL, "occupied_rooms" int NOT NULL, "occupancy_rate" decimal(5,2) NOT NULL, "top_selling_items" nvarchar(255), "low_performing_items" nvarchar(255), "total_preparation_time_minutes" int NOT NULL, "average_preparation_time_minutes" int NOT NULL, "total_delivery_time_minutes" int NOT NULL, "average_delivery_time_minutes" int NOT NULL, "created_at" datetime2 NOT NULL CONSTRAINT "DF_2263c4d61b60593fd7d70247174" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_94e18dc451e3f2be721ac8c394e" DEFAULT getdate(), CONSTRAINT "PK_0e0b099eef5add99fc9467bc5fe" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_2b1205412935e9808d67db525f" ON "business_metrics" ("date") `);
        await queryRunner.query(`CREATE INDEX "IDX_bce0c6633d28494d9a8bc56cd0" ON "business_metrics" ("restaurant_id", "date") `);
        await queryRunner.query(`CREATE TABLE "activity_log" ("id" int NOT NULL IDENTITY(1,1), "user_id" int, "action" varchar(100) NOT NULL, "entity_type" varchar(100) NOT NULL, "entity_id" varchar(100) NOT NULL, "old_values" nvarchar(255), "new_values" nvarchar(255), "ip_address" varchar(50), "user_agent" varchar(255), "description" text, "session_id" varchar(50), "timestamp" datetime NOT NULL, "created_at" datetime2 NOT NULL CONSTRAINT "DF_a9aa535a31227ef336222d28e13" DEFAULT getdate(), CONSTRAINT "PK_067d761e2956b77b14e534fd6f1" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_13f3cf247b11fa7fa38be36f01" ON "activity_log" ("timestamp") `);
        await queryRunner.query(`CREATE INDEX "IDX_959edb8257ad43d7cb2f8d095e" ON "activity_log" ("action", "timestamp") `);
        await queryRunner.query(`CREATE INDEX "IDX_4302f461733b6ec81cd7d023f8" ON "activity_log" ("entity_type", "entity_id") `);
        await queryRunner.query(`CREATE INDEX "IDX_41b703a3dce9703a30e53ae454" ON "activity_log" ("user_id", "timestamp") `);
        await queryRunner.query(`CREATE TABLE "otps" ("otp_id" int NOT NULL IDENTITY(1,1), "email" varchar(255) NOT NULL, "otp_code" varchar(10) NOT NULL, "otp_type" varchar(30) NOT NULL, "status" varchar(20) NOT NULL CONSTRAINT "DF_59fb6a727148720e17d26efb165" DEFAULT 'pending', "expires_at" datetime2 NOT NULL, "verified_at" datetime2, "attempts" int NOT NULL CONSTRAINT "DF_9d25a2719652db7d270a8b5c2bf" DEFAULT 0, "created_at" datetime2 NOT NULL CONSTRAINT "DF_8a76ff5161ab826ca96b285cb08" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_beed49055f72629c9dcdb8bdcf9" DEFAULT getdate(), CONSTRAINT "PK_d73db5899adf59583abd31e2309" PRIMARY KEY ("otp_id"))`);
        await queryRunner.query(`CREATE TABLE "notification" ("id" int NOT NULL IDENTITY(1,1), "user_id" int NOT NULL, "type" varchar(100) NOT NULL, "title" varchar(255) NOT NULL, "message" text NOT NULL, "priority" varchar(20) NOT NULL CONSTRAINT "DF_a515f32bb83b17b24dae6406d58" DEFAULT 'medium', "metadata" nvarchar(255), "channel" varchar(50) NOT NULL CONSTRAINT "DF_38df41b04132b0a08a949b493aa" DEFAULT 'in_app', "is_read" bit NOT NULL CONSTRAINT "DF_aedc307c7e60ecb138e3f90ff8e" DEFAULT 0, "read_at" datetime, "is_sent" bit NOT NULL CONSTRAINT "DF_95d28817f678ae36afd1e5881a5" DEFAULT 0, "sent_at" datetime, "scheduled_for" datetime, "expires_at" datetime, "action_url" varchar(255), "action_label" varchar(100), "created_at" datetime2 NOT NULL CONSTRAINT "DF_8bdc07e9c41ce8d83730f0f5d88" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_e13cf12d6a05407dbac647761c4" DEFAULT getdate(), CONSTRAINT "PK_705b6c7cdf9b2c2ff7ac7872cb7" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE INDEX "IDX_6ce8924c20fe5e65d1bf282f51" ON "notification" ("is_read", "created_at") `);
        await queryRunner.query(`CREATE INDEX "IDX_12a9a4259cea86d02b12fe93d6" ON "notification" ("type", "created_at") `);
        await queryRunner.query(`CREATE INDEX "IDX_73bfce92922b5fdb3c378fc8b9" ON "notification" ("user_id", "created_at") `);
        await queryRunner.query(`ALTER TABLE "room" ADD CONSTRAINT "FK_e12f4703203a522f06b210d11af" FOREIGN KEY ("restaurant_id") REFERENCES "restaurant"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "room_booking" ADD CONSTRAINT "FK_fa30cbd7fa3588d5f8699503779" FOREIGN KEY ("room_id") REFERENCES "room"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "room_booking" ADD CONSTRAINT "FK_84de6b7898532f74e4e8c32066a" FOREIGN KEY ("user_id") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "invoice" ADD CONSTRAINT "FK_b63cfba23ecc43531b5c571ffa3" FOREIGN KEY ("payment_id") REFERENCES "payment"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "payment" ADD CONSTRAINT "FK_f5221735ace059250daac9d9803" FOREIGN KEY ("order_id") REFERENCES "orders"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "payment" ADD CONSTRAINT "FK_c66c60a17b56ec882fcd8ec770b" FOREIGN KEY ("user_id") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "payment" ADD CONSTRAINT "FK_fc0069dbffe962f7b1604c14104" FOREIGN KEY ("reservation_id") REFERENCES "reservation"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "payment" ADD CONSTRAINT "FK_68cdd285bf17d1527f6a213c392" FOREIGN KEY ("room_booking_id") REFERENCES "room_booking"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "reservation" ADD CONSTRAINT "FK_e219b0a4ff01b85072bfadf3fd7" FOREIGN KEY ("user_id") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "reservation" ADD CONSTRAINT "FK_b8e66a59e3500c7a85cde4fb020" FOREIGN KEY ("restaurant_id") REFERENCES "restaurant"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "reservation" ADD CONSTRAINT "FK_d3321fc44e70fd7e803491513d6" FOREIGN KEY ("table_id") REFERENCES "table"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "table" ADD CONSTRAINT "FK_1e79a861b6be1078a6b79e48ff9" FOREIGN KEY ("restaurant_id") REFERENCES "restaurant"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "address" ADD CONSTRAINT "FK_35cd6c3fafec0bb5d072e24ea20" FOREIGN KEY ("user_id") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "address" ADD CONSTRAINT "FK_714a4ca3cfd66a718b5f7c3fee5" FOREIGN KEY ("city_id") REFERENCES "city"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "order_status" ADD CONSTRAINT "FK_94eff27e795c6c02bdd07abd0ae" FOREIGN KEY ("order_id") REFERENCES "orders"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "order_status" ADD CONSTRAINT "FK_fc531e3259b71a7d8da5296a721" FOREIGN KEY ("status_catalog_id") REFERENCES "status_catalog"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "category" ADD CONSTRAINT "FK_48be827a112f05347b53cbc330b" FOREIGN KEY ("restaurant_id") REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "review" ADD CONSTRAINT "FK_81446f2ee100305f42645d4d6c2" FOREIGN KEY ("user_id") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "review" ADD CONSTRAINT "FK_9e0a456057cd16f910bfad306ad" FOREIGN KEY ("restaurant_id") REFERENCES "restaurant"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "review" ADD CONSTRAINT "FK_6b3c3b6826a71efc35fcf8d02d6" FOREIGN KEY ("menu_item_id") REFERENCES "menu_item"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "menu_item" ADD CONSTRAINT "FK_a3c3188fed5e5b458ea15047319" FOREIGN KEY ("restaurant_id") REFERENCES "restaurant"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "menu_item" ADD CONSTRAINT "FK_0d7401f822dda4303ecdeea2ca1" FOREIGN KEY ("category_id") REFERENCES "category"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "order_item" ADD CONSTRAINT "FK_e9674a6053adbaa1057848cddfa" FOREIGN KEY ("order_id") REFERENCES "orders"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "order_item" ADD CONSTRAINT "FK_2dcc6c8c2d412597a9c8be73235" FOREIGN KEY ("menu_item_id") REFERENCES "menu_item"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "delivery_tracking" ADD CONSTRAINT "FK_9baaa588693ae1f7335b63fa4ac" FOREIGN KEY ("order_id") REFERENCES "orders"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "delivery_tracking" ADD CONSTRAINT "FK_5ad8bf25a103cced651aef52c51" FOREIGN KEY ("driver_id") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "orders" ADD CONSTRAINT "FK_85fdda5fcce2f397ef8f117a2c6" FOREIGN KEY ("restaurant_id") REFERENCES "restaurant"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "orders" ADD CONSTRAINT "FK_a922b820eeef29ac1c6800e826a" FOREIGN KEY ("user_id") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "orders" ADD CONSTRAINT "FK_222cd7bf166a2d7a6aad9cdebee" FOREIGN KEY ("driver_id") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "orders" ADD CONSTRAINT "FK_3d36410e89a795172fa6e0dd968" FOREIGN KEY ("table_id") REFERENCES "table"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "orders" ADD CONSTRAINT "FK_822c5ebe47e43ebe715f68968c4" FOREIGN KEY ("delivery_address_id") REFERENCES "address"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "orders" ADD CONSTRAINT "FK_03a801095cb90cf148e474cfcb7" FOREIGN KEY ("status_id") REFERENCES "status_catalog"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "vehicle_info" ADD CONSTRAINT "FK_f67df89a1a40c7d272f32a7bb0b" FOREIGN KEY ("user_id") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "shift" ADD CONSTRAINT "FK_d030acf2e7099f931d515237ecb" FOREIGN KEY ("staff_id") REFERENCES "restaurant_staff"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "restaurant_staff" ADD CONSTRAINT "FK_973c53bdc06495c9daf779e23f3" FOREIGN KEY ("user_id") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "restaurant_staff" ADD CONSTRAINT "FK_14050e881d650b217075f1110c4" FOREIGN KEY ("restaurant_id") REFERENCES "restaurant"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "staff_assignments" ADD CONSTRAINT "FK_6ac397c566a0f56bd6fe2b54262" FOREIGN KEY ("restaurant_id") REFERENCES "restaurant"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "staff_assignments" ADD CONSTRAINT "FK_6ff0f6a29afcb34aa82e9963298" FOREIGN KEY ("staff_id") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "driver_assignments" ADD CONSTRAINT "FK_444146448fe885ff036ecb47e46" FOREIGN KEY ("restaurant_id") REFERENCES "restaurant"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "driver_assignments" ADD CONSTRAINT "FK_3b70749e81638d9f7e532c8b9a2" FOREIGN KEY ("driver_id") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "users" ADD CONSTRAINT "FK_a2cecd1a3531c0b041e29ba46e1" FOREIGN KEY ("role_id") REFERENCES "user_roles"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "restaurant" ADD CONSTRAINT "FK_fe7a22ecf454b7168b5a37fbdce" FOREIGN KEY ("owner_id") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "restaurant" ADD CONSTRAINT "FK_6f2fe84da283ef2126d64bed513" FOREIGN KEY ("city_id") REFERENCES "city"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "city" ADD CONSTRAINT "FK_37ecd8addf395545dcb0242a593" FOREIGN KEY ("state_id") REFERENCES "state"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "state" ADD CONSTRAINT "FK_dd19065b0813dbffd8170ea6753" FOREIGN KEY ("country_id") REFERENCES "country"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "stock_transaction" ADD CONSTRAINT "FK_7ce6b58c7b0e3a43234ef0b0ed2" FOREIGN KEY ("inventory_item_id") REFERENCES "inventory_item"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "inventory_item" ADD CONSTRAINT "FK_18dd0db74004e8690071cb13fd8" FOREIGN KEY ("restaurant_id") REFERENCES "restaurant"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "inventory_item" ADD CONSTRAINT "FK_abb65d61d4c77ad7388c51bdb83" FOREIGN KEY ("supplier_id") REFERENCES "supplier"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "refresh_tokens" ADD CONSTRAINT "FK_3ddc983c5f7bcf132fd8732c3f4" FOREIGN KEY ("user_id") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "user_behavior" ADD CONSTRAINT "FK_f906368b51143310b721aa4c833" FOREIGN KEY ("user_id") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "activity_log" ADD CONSTRAINT "FK_81615294532ca4b6c70abd1b2e6" FOREIGN KEY ("user_id") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "notification" ADD CONSTRAINT "FK_928b7aa1754e08e1ed7052cb9d8" FOREIGN KEY ("user_id") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
    }

    public async down(queryRunner: QueryRunner): Promise<void> {
        await queryRunner.query(`ALTER TABLE "notification" DROP CONSTRAINT "FK_928b7aa1754e08e1ed7052cb9d8"`);
        await queryRunner.query(`ALTER TABLE "activity_log" DROP CONSTRAINT "FK_81615294532ca4b6c70abd1b2e6"`);
        await queryRunner.query(`ALTER TABLE "user_behavior" DROP CONSTRAINT "FK_f906368b51143310b721aa4c833"`);
        await queryRunner.query(`ALTER TABLE "refresh_tokens" DROP CONSTRAINT "FK_3ddc983c5f7bcf132fd8732c3f4"`);
        await queryRunner.query(`ALTER TABLE "inventory_item" DROP CONSTRAINT "FK_abb65d61d4c77ad7388c51bdb83"`);
        await queryRunner.query(`ALTER TABLE "inventory_item" DROP CONSTRAINT "FK_18dd0db74004e8690071cb13fd8"`);
        await queryRunner.query(`ALTER TABLE "stock_transaction" DROP CONSTRAINT "FK_7ce6b58c7b0e3a43234ef0b0ed2"`);
        await queryRunner.query(`ALTER TABLE "state" DROP CONSTRAINT "FK_dd19065b0813dbffd8170ea6753"`);
        await queryRunner.query(`ALTER TABLE "city" DROP CONSTRAINT "FK_37ecd8addf395545dcb0242a593"`);
        await queryRunner.query(`ALTER TABLE "restaurant" DROP CONSTRAINT "FK_6f2fe84da283ef2126d64bed513"`);
        await queryRunner.query(`ALTER TABLE "restaurant" DROP CONSTRAINT "FK_fe7a22ecf454b7168b5a37fbdce"`);
        await queryRunner.query(`ALTER TABLE "users" DROP CONSTRAINT "FK_a2cecd1a3531c0b041e29ba46e1"`);
        await queryRunner.query(`ALTER TABLE "driver_assignments" DROP CONSTRAINT "FK_3b70749e81638d9f7e532c8b9a2"`);
        await queryRunner.query(`ALTER TABLE "driver_assignments" DROP CONSTRAINT "FK_444146448fe885ff036ecb47e46"`);
        await queryRunner.query(`ALTER TABLE "staff_assignments" DROP CONSTRAINT "FK_6ff0f6a29afcb34aa82e9963298"`);
        await queryRunner.query(`ALTER TABLE "staff_assignments" DROP CONSTRAINT "FK_6ac397c566a0f56bd6fe2b54262"`);
        await queryRunner.query(`ALTER TABLE "restaurant_staff" DROP CONSTRAINT "FK_14050e881d650b217075f1110c4"`);
        await queryRunner.query(`ALTER TABLE "restaurant_staff" DROP CONSTRAINT "FK_973c53bdc06495c9daf779e23f3"`);
        await queryRunner.query(`ALTER TABLE "shift" DROP CONSTRAINT "FK_d030acf2e7099f931d515237ecb"`);
        await queryRunner.query(`ALTER TABLE "vehicle_info" DROP CONSTRAINT "FK_f67df89a1a40c7d272f32a7bb0b"`);
        await queryRunner.query(`ALTER TABLE "orders" DROP CONSTRAINT "FK_03a801095cb90cf148e474cfcb7"`);
        await queryRunner.query(`ALTER TABLE "orders" DROP CONSTRAINT "FK_822c5ebe47e43ebe715f68968c4"`);
        await queryRunner.query(`ALTER TABLE "orders" DROP CONSTRAINT "FK_3d36410e89a795172fa6e0dd968"`);
        await queryRunner.query(`ALTER TABLE "orders" DROP CONSTRAINT "FK_222cd7bf166a2d7a6aad9cdebee"`);
        await queryRunner.query(`ALTER TABLE "orders" DROP CONSTRAINT "FK_a922b820eeef29ac1c6800e826a"`);
        await queryRunner.query(`ALTER TABLE "orders" DROP CONSTRAINT "FK_85fdda5fcce2f397ef8f117a2c6"`);
        await queryRunner.query(`ALTER TABLE "delivery_tracking" DROP CONSTRAINT "FK_5ad8bf25a103cced651aef52c51"`);
        await queryRunner.query(`ALTER TABLE "delivery_tracking" DROP CONSTRAINT "FK_9baaa588693ae1f7335b63fa4ac"`);
        await queryRunner.query(`ALTER TABLE "order_item" DROP CONSTRAINT "FK_2dcc6c8c2d412597a9c8be73235"`);
        await queryRunner.query(`ALTER TABLE "order_item" DROP CONSTRAINT "FK_e9674a6053adbaa1057848cddfa"`);
        await queryRunner.query(`ALTER TABLE "menu_item" DROP CONSTRAINT "FK_0d7401f822dda4303ecdeea2ca1"`);
        await queryRunner.query(`ALTER TABLE "menu_item" DROP CONSTRAINT "FK_a3c3188fed5e5b458ea15047319"`);
        await queryRunner.query(`ALTER TABLE "review" DROP CONSTRAINT "FK_6b3c3b6826a71efc35fcf8d02d6"`);
        await queryRunner.query(`ALTER TABLE "review" DROP CONSTRAINT "FK_9e0a456057cd16f910bfad306ad"`);
        await queryRunner.query(`ALTER TABLE "review" DROP CONSTRAINT "FK_81446f2ee100305f42645d4d6c2"`);
        await queryRunner.query(`ALTER TABLE "category" DROP CONSTRAINT "FK_48be827a112f05347b53cbc330b"`);
        await queryRunner.query(`ALTER TABLE "order_status" DROP CONSTRAINT "FK_fc531e3259b71a7d8da5296a721"`);
        await queryRunner.query(`ALTER TABLE "order_status" DROP CONSTRAINT "FK_94eff27e795c6c02bdd07abd0ae"`);
        await queryRunner.query(`ALTER TABLE "address" DROP CONSTRAINT "FK_714a4ca3cfd66a718b5f7c3fee5"`);
        await queryRunner.query(`ALTER TABLE "address" DROP CONSTRAINT "FK_35cd6c3fafec0bb5d072e24ea20"`);
        await queryRunner.query(`ALTER TABLE "table" DROP CONSTRAINT "FK_1e79a861b6be1078a6b79e48ff9"`);
        await queryRunner.query(`ALTER TABLE "reservation" DROP CONSTRAINT "FK_d3321fc44e70fd7e803491513d6"`);
        await queryRunner.query(`ALTER TABLE "reservation" DROP CONSTRAINT "FK_b8e66a59e3500c7a85cde4fb020"`);
        await queryRunner.query(`ALTER TABLE "reservation" DROP CONSTRAINT "FK_e219b0a4ff01b85072bfadf3fd7"`);
        await queryRunner.query(`ALTER TABLE "payment" DROP CONSTRAINT "FK_68cdd285bf17d1527f6a213c392"`);
        await queryRunner.query(`ALTER TABLE "payment" DROP CONSTRAINT "FK_fc0069dbffe962f7b1604c14104"`);
        await queryRunner.query(`ALTER TABLE "payment" DROP CONSTRAINT "FK_c66c60a17b56ec882fcd8ec770b"`);
        await queryRunner.query(`ALTER TABLE "payment" DROP CONSTRAINT "FK_f5221735ace059250daac9d9803"`);
        await queryRunner.query(`ALTER TABLE "invoice" DROP CONSTRAINT "FK_b63cfba23ecc43531b5c571ffa3"`);
        await queryRunner.query(`ALTER TABLE "room_booking" DROP CONSTRAINT "FK_84de6b7898532f74e4e8c32066a"`);
        await queryRunner.query(`ALTER TABLE "room_booking" DROP CONSTRAINT "FK_fa30cbd7fa3588d5f8699503779"`);
        await queryRunner.query(`ALTER TABLE "room" DROP CONSTRAINT "FK_e12f4703203a522f06b210d11af"`);
        await queryRunner.query(`DROP INDEX "IDX_73bfce92922b5fdb3c378fc8b9" ON "notification"`);
        await queryRunner.query(`DROP INDEX "IDX_12a9a4259cea86d02b12fe93d6" ON "notification"`);
        await queryRunner.query(`DROP INDEX "IDX_6ce8924c20fe5e65d1bf282f51" ON "notification"`);
        await queryRunner.query(`DROP TABLE "notification"`);
        await queryRunner.query(`DROP TABLE "otps"`);
        await queryRunner.query(`DROP INDEX "IDX_41b703a3dce9703a30e53ae454" ON "activity_log"`);
        await queryRunner.query(`DROP INDEX "IDX_4302f461733b6ec81cd7d023f8" ON "activity_log"`);
        await queryRunner.query(`DROP INDEX "IDX_959edb8257ad43d7cb2f8d095e" ON "activity_log"`);
        await queryRunner.query(`DROP INDEX "IDX_13f3cf247b11fa7fa38be36f01" ON "activity_log"`);
        await queryRunner.query(`DROP TABLE "activity_log"`);
        await queryRunner.query(`DROP INDEX "IDX_bce0c6633d28494d9a8bc56cd0" ON "business_metrics"`);
        await queryRunner.query(`DROP INDEX "IDX_2b1205412935e9808d67db525f" ON "business_metrics"`);
        await queryRunner.query(`DROP TABLE "business_metrics"`);
        await queryRunner.query(`DROP INDEX "IDX_e6ffc42dd1f62d01a1bf609627" ON "user_behavior"`);
        await queryRunner.query(`DROP INDEX "IDX_dc5c5ce5901245af0baff0d20b" ON "user_behavior"`);
        await queryRunner.query(`DROP TABLE "user_behavior"`);
        await queryRunner.query(`DROP INDEX "IDX_3ddc983c5f7bcf132fd8732c3f" ON "refresh_tokens"`);
        await queryRunner.query(`DROP INDEX "IDX_4542dd2f38a61354a040ba9fd5" ON "refresh_tokens"`);
        await queryRunner.query(`DROP TABLE "refresh_tokens"`);
        await queryRunner.query(`DROP TABLE "supplier"`);
        await queryRunner.query(`DROP INDEX "IDX_32c5687918533fbb6f0c12db6a" ON "inventory_item"`);
        await queryRunner.query(`DROP TABLE "inventory_item"`);
        await queryRunner.query(`DROP INDEX "IDX_0eac8d9bcb0be44d349b122979" ON "stock_transaction"`);
        await queryRunner.query(`DROP TABLE "stock_transaction"`);
        await queryRunner.query(`DROP TABLE "state"`);
        await queryRunner.query(`DROP TABLE "city"`);
        await queryRunner.query(`DROP INDEX "REL_fe7a22ecf454b7168b5a37fbdc" ON "restaurant"`);
        await queryRunner.query(`DROP TABLE "restaurant"`);
        await queryRunner.query(`DROP INDEX "IDX_97672ac88f789774dd47f7c8be" ON "users"`);
        await queryRunner.query(`DROP INDEX "IDX_a000cca60bcf04454e72769949" ON "users"`);
        await queryRunner.query(`DROP INDEX "IDX_a2cecd1a3531c0b041e29ba46e" ON "users"`);
        await queryRunner.query(`DROP TABLE "users"`);
        await queryRunner.query(`DROP TABLE "driver_assignments"`);
        await queryRunner.query(`DROP TABLE "staff_assignments"`);
        await queryRunner.query(`DROP INDEX "REL_973c53bdc06495c9daf779e23f" ON "restaurant_staff"`);
        await queryRunner.query(`DROP TABLE "restaurant_staff"`);
        await queryRunner.query(`DROP INDEX "IDX_b41697313e0aad1c91fa14a9b9" ON "shift"`);
        await queryRunner.query(`DROP TABLE "shift"`);
        await queryRunner.query(`DROP INDEX "REL_f67df89a1a40c7d272f32a7bb0" ON "vehicle_info"`);
        await queryRunner.query(`DROP TABLE "vehicle_info"`);
        await queryRunner.query(`DROP INDEX "IDX_0379c1cb8cd158363b657fd849" ON "orders"`);
        await queryRunner.query(`DROP INDEX "IDX_c884e321f927d5b86aac7c8f9e" ON "orders"`);
        await queryRunner.query(`DROP INDEX "IDX_222cd7bf166a2d7a6aad9cdebe" ON "orders"`);
        await queryRunner.query(`DROP TABLE "orders"`);
        await queryRunner.query(`DROP INDEX "IDX_7f701a8fb1c77001a8c9c9ac3c" ON "delivery_tracking"`);
        await queryRunner.query(`DROP TABLE "delivery_tracking"`);
        await queryRunner.query(`DROP TABLE "order_item"`);
        await queryRunner.query(`DROP INDEX "IDX_c92955bfc77b52366c99bd065b" ON "menu_item"`);
        await queryRunner.query(`DROP TABLE "menu_item"`);
        await queryRunner.query(`DROP INDEX "IDX_7258583122a81366d02d06f7af" ON "review"`);
        await queryRunner.query(`DROP INDEX "IDX_6781107b20e9aed484c340e908" ON "review"`);
        await queryRunner.query(`DROP TABLE "review"`);
        await queryRunner.query(`DROP TABLE "category"`);
        await queryRunner.query(`DROP TABLE "status_catalog"`);
        await queryRunner.query(`DROP TABLE "order_status"`);
        await queryRunner.query(`DROP TABLE "address"`);
        await queryRunner.query(`DROP TABLE "table"`);
        await queryRunner.query(`DROP INDEX "IDX_84a0268487fde50cc3a50f3e8a" ON "reservation"`);
        await queryRunner.query(`DROP TABLE "reservation"`);
        await queryRunner.query(`DROP INDEX "REL_68cdd285bf17d1527f6a213c39" ON "payment"`);
        await queryRunner.query(`DROP INDEX "REL_fc0069dbffe962f7b1604c1410" ON "payment"`);
        await queryRunner.query(`DROP TABLE "payment"`);
        await queryRunner.query(`DROP TABLE "invoice"`);
        await queryRunner.query(`DROP INDEX "IDX_a0636ea72b90d6196820447479" ON "room_booking"`);
        await queryRunner.query(`DROP TABLE "room_booking"`);
        await queryRunner.query(`DROP TABLE "room"`);
        await queryRunner.query(`DROP INDEX "IDX_4a77d431a6b2ac981c342b13c9" ON "user_roles"`);
        await queryRunner.query(`DROP TABLE "user_roles"`);
        await queryRunner.query(`DROP TABLE "country"`);
        await queryRunner.query(`DROP INDEX "IDX_ecbffcd25b85459ccf5e753e01" ON "email_log"`);
        await queryRunner.query(`DROP TABLE "email_log"`);
    }

}
